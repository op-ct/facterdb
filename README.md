facterdb
========

[![Build Status](https://img.shields.io/travis/camptocamp/facterdb/master.svg)](https://travis-ci.org/camptocamp/facterdb)
[![Code Climate](https://img.shields.io/codeclimate/github/camptocamp/facterdb.svg)](https://codeclimate.com/github/camptocamp/facterdb)
[![Gem Version](https://img.shields.io/gem/v/facterdb.svg)](https://rubygems.org/gems/facterdb)
[![Gem Downloads](https://img.shields.io/gem/dt/facterdb.svg)](https://rubygems.org/gems/facterdb)
[![Coverage Status](https://img.shields.io/coveralls/camptocamp/facterdb.svg)](https://coveralls.io/r/camptocamp/facterdb?branch=master)

A Gem that contains a lot of facts for a lot of Operating Systems.

# Usage

## CLI

```shell
facterdb 'facterversion=/^2.4\./ and (operatingsystem=Debian and operatingsystemrelease>=7 or operatingsystem=RedHat and operatingsystemrelease=/^7/)'
```

Will return a JSON containing the facts for Debian 7, Debian 8 and RedHat 7 generated by Facter 2.4.

## Ruby

```ruby
require 'facterdb'
FacterDB::get_facts()
```

Returns an Array of Hash containing the whole facts database.

## Filtering by Facter version and fact values

### With an Array filter

```ruby
require 'facterdb'

FacterDB.get_facts([{:osfamily => 'Debian'}])
```

### With an Hash filter

```ruby
require 'facterdb'

FacterDB.get_facts({:osfamily => 'Debian'})
```

### With a String filter

```ruby
require 'facterdb'

FacterDB::get_facts('osfamily=Debian')
```

# Coverage

## Facter version and Operating System coverage

|    operating system     | 1.6 | 1.7 | 2.0 | 2.1 | 2.2 | 2.3 | 2.4 | 3.0 | 3.1 | 3.3 |
| ----------------------- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Archlinux               |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| CentOS 5                |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| CentOS 6                |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| CentOS 7                |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |
| Darwin 14               |     |     |  2  |  2  |  2  |  2  |  2  |     |     |     |
| Debian 6                |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |
| Debian 7                |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |
| Debian 8                |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |
| Fedora 19               |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| Fedora 22               |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |  2  |     |
| Fedora 23               |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |  2  |     |
| FreeBSD 10              |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| FreeBSD 9               |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| Gentoo                  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| OpenBSD 5.7             |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| OpenBSD 5.8             |     |     |  2  |  2  |  2  |  2  |  2  |     |     |     |
| OpenBSD 5.9             |     |     |  2  |  2  |  2  |  2  |  2  |     |     |     |
| OpenSuSE 12             |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| OpenSuSE 13             |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| OracleLinux 5           |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| OracleLinux 6           |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| OracleLinux 7           |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |
| RedHat 5                |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| RedHat 6                |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| RedHat 7                |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |
| SLES 11                 |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| Scientific 5            |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| Scientific 6            |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| Scientific 7            |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |
| Solaris 11              |  2  |  2  |     |     |     |     |     |     |     |     |
| Solaris 2               |     |     |  2  |  2  |  2  |  2  |  2  |     |     |     |
| Ubuntu 10.04            |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| Ubuntu 12.04            |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |
| Ubuntu 14.04            |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |
| Ubuntu 14.10            |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| Ubuntu 15.04            |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |     |     |
| Ubuntu 15.10            |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |
| Ubuntu 16.04            |  2  |  2  |  2  |  2  |  2  |  2  |  2  |     |  2  |     |
| windows 2008 R2         |  1  |  1  |  1  |     |  1  |  1  |  1  |  1  |  1  |  1  |
| windows 2012 R2         |  1  |  1  |  1  |     |  1  |  1  |  1  |  1  |  1  |  1  |
| windows 7               |     |     |     |     |     |     |  1  |  2  |  2  |     |

`2 = number of factsets (e.g., x86_64 and i386 architectures)`

## Add new Operating System support

There is `Vagrantfile` to automagically populate `facts` directory by spawning a new VM and launches a provisioning scripts.

```
$ cd facts
$ vagrant up --provision
```

Create i386 facts from x86_64's ones

```
for file in facts/*/*-x86_64.facts; do cat $file | sed -e 's/x86_64/i386/' -e 's/amd64/i386/' > $(echo $file | sed 's/x86_64/i386/'); done
```
Create RedHat, Scientific, OracleLinux facts from CentOS's ones

```
for file in facts/*/centos-*.facts; do cat $file | sed -e 's/CentOS/RedHat/' > $(echo $file | sed 's/centos/redhat/'); done
for file in facts/*/centos-*.facts; do cat $file | sed -e 's/CentOS/Scientific/' > $(echo $file | sed 's/centos/scientific/'); done
for file in facts/*/centos-*.facts; do cat $file | sed -e 's/CentOS/OracleLinux/' > $(echo $file | sed 's/centos/oraclelinux/'); done
```
